# 运维核心知识

### docker搭建php运维环境

#### 1. 相关命令

~~~
1. 安装docker
yum install -y yum-utils \ 
	device-mapper-persistent-data \ 
	lvm2
修改镜像源：yum-config-manager \
    --add-repo \
    https://mirrors.aliyun.com/docker-ce/linux/centos/docker-ce.repo
 安装docker: yum install docker-ce docker-ce-cli containerd.io
2. 拉取镜像：
	docker pull nginx:latest
3. 查看镜像：
	docker images
	得到如图所示信息
[root@SFA-LNO600103 ~]# docker images
REPOSITORY          TAG                 IMAGE ID            CREATED             SIZE
redis               latest              36304d3b4540        9 days ago          104MB
jpetazzo/nsenter    latest              427d3ddc6f9d        11 days ago         377MB
mysql               latest              30f937e841c8        2 weeks ago         541MB
nginx               latest              9beeba249f3e        3 weeks ago         127MB
php                 7.4.6-fpm           08d4d084c975        3 weeks ago         405MB
4. 删除镜像：
   docker rmi image_id
5. 查看容器
   docker ps [-a] [-q]
   -a 未运行的容器也显示(全部容器)
   -q 只显示容器id
[root@SFA-LNO600103 ~]# docker ps -a
CONTAINER ID        IMAGE               COMMAND                  CREATED             STATUS              PORTS                               NAMES
fbd11c3051d2        nginx:latest        "nginx -g 'daemon of…"   About an hour ago   Up About an hour    80/tcp, 0.0.0.0:8080->8080/tcp      mynginx
f7b406496611        php:7.4.6-fpm       "docker-php-entrypoi…"   About an hour ago   Up About an hour    0.0.0.0:9000->9000/tcp              myphp
f0ec923727dc        mysql:latest        "docker-entrypoint.s…"   2 hours ago         Up 2 hours          33060/tcp, 0.0.0.0:8306->3306/tcp   mydb
3e042358b3df        redis:latest        "docker-entrypoint.s…"   2 hours ago         Up 2 hours          0.0.0.0:8379->6379/tcp              myredis
6. 查看容器日志
	docker logs container_id
7. 进入容器
	docker exec -it fbd11c3051d2[或者mynginx] /bin/bash
8. docker inspect 9beeba249f3e[或者mynginx]
	查看容器相关信息
10. 复制某一容器文件到宿主机
	docker cp mynginx:/etc/nginx/conf.d/default.conf /usr/local/nginx/conf/
11. 容器重命名：
	docker rename mynginx mynginx2

其他命令：
启动        systemctl start docker
守护进程重启   sudo systemctl daemon-reload
重启docker服务   systemctl restart  docker
重启docker服务  sudo service docker restart
关闭docker service docker stop
关闭docker systemctl stop docker
~~~



